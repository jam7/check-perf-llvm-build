# LLVM ビルド性能比較結果

## リンク方式

| 名前 | CMakeオプション | 説明 |
|------|----------------|------|
| static | (デフォルト) | 各ツールにLLVMライブラリを静的リンク。実行ファイルは大きくなるがリンク依存なし |
| dso1 | `-DBUILD_SHARED_LIBS=ON` | 各LLVMライブラリを個別の共有ライブラリ(.so)としてビルド。開発時のリンク高速化向け（非推奨: インストール用途には非対応） |
| dso2 | `-DLLVM_BUILD_LLVM_DYLIB=ON -DLLVM_LINK_LLVM_DYLIB=ON` | 全LLVMライブラリを単一の共有ライブラリ(libLLVM.so)に統合し、各ツールからリンク。公式に推奨される共有ライブラリ方式 |

## 実行環境

| 名前 | 実行方法 | 説明 |
|------|---------|------|
| centos7 | `apptainer exec ~/centos7-ve-llvm-build.sif` | CentOS 7 コンテナ (GCC 11.2.1) |
| ubuntu | `apptainer exec ~/ubuntu-ve-llvm-build.sif` | Ubuntu コンテナ (GCC 13.3.0) |
| native | 直接実行 | ホスト環境 (`/opt/nec/ve` 存在時のみ) |

## LLVM ビルド性能比較結果
実行日時: 2026-02-16 08:29:05

ビルドタイプ: `Debug`, コンパイルスレッド数: 12, リンクスレッド数: 1

| 環境 | リンク方式 | cmake (秒) | build (秒) | check-llvm (秒) | check-clang (秒) | 合計 (秒) |
|------|-----------|------------|-----------|-----------------|------------------|----------|
| centos7 | static | 15 | 1648 | 262 | 422 | 2347 |
| centos7 | dso1 | 14 | 1435 | 288 | 537 | 2274 |
| centos7 | dso2 | 15 | 1460 | 325 | 452 | 2252 |

---

# 以前の結果 (cmake + check-llvm のみ)

## SIF ファイル使用 (apptainer exec *.sif)
実行日時: 2026-02-15 17:50:10

ビルドタイプ: `Debug`, コンパイルスレッド数: 12, リンクスレッド数: 1

| 環境 | リンク方式 | cmake (秒) | check-llvm (秒) | 合計 (秒) |
|------|-----------|------------|-----------------|----------|
| centos7 | static | 17 | 1052 | 1069 |
| centos7 | dso1 | 16 | 954 | 970 |
| centos7 | dso2 | 13 | 1042 | 1055 |
| ubuntu | static | 12 | 996 | 1008 |
| ubuntu | dso1 | 16 | 921 | 937 |
| ubuntu | dso2 | 15 | 991 | 1006 |

## Docker イメージ使用 (apptainer exec docker://jam7/centos7-ve-llvm-build:latest)
実行日時: 2026-02-15 21:59:30

ビルドタイプ: `Debug`, コンパイルスレッド数: 12, リンクスレッド数: 1

| 環境 | リンク方式 | cmake (秒) | check-llvm (秒) | 合計 (秒) |
|------|-----------|------------|-----------------|----------|
| centos7 | static | 34 | 1045 | 1079 |
| centos7 | dso1 | 20 | 981 | 1001 |
| centos7 | dso2 | 14 | 1032 | 1046 |

## centos7 比較 (SIF vs Docker)

ビルドタイプ: `Debug`, コンパイルスレッド数: 12, リンクスレッド数: 1

| リンク方式 | SIF 合計 (秒) | Docker 合計 (秒) | 差分 (秒) |
|-----------|-------------|-----------------|----------|
| static | 1069 | 1079 | +10 |
| dso1 | 970 | 1001 | +31 |
| dso2 | 1055 | 1046 | -9 |
